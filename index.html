<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eagle Eye â€” Assembly Tree</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- â•â•â• HEADER â•â•â• -->
<div class="header">
  <div class="status-dot" id="statusDot"></div>
  <h1>âš™ï¸ Eagle Eye</h1>
  <span class="tag-badge" id="assyTag">loadingâ€¦</span>
  <span class="stats" id="statsText">Loadingâ€¦</span>
  <span style="flex:1;"></span>
  <span class="status-text" id="statusText">Connectingâ€¦</span>
</div>

<!-- â•â•â• TOOLBAR â•â•â• -->
<div class="toolbar">
  <button class="tool-btn" id="saveBtn">ğŸ’¾ Save</button>
  <button class="tool-btn" id="fitBtn">âŠ¡ Fit</button>
  <div class="sep"></div>
  <button class="tool-btn active" id="seqToggle" title="Sequence Numbers">1ï¸âƒ£ Seq</button>
  <button class="tool-btn active" id="partsToggle" title="Part Nodes">ğŸ”© Parts</button>
  <button class="tool-btn active" id="headersToggle" title="Level Headers">ğŸ· Headers</button>
  <div class="sep"></div>
  <button class="tool-btn" id="ecnToggle">âš¡ ECN</button>
</div>

<!-- â•â•â• ECN BAR â•â•â• -->
<div class="ecn-bar" id="ecnBar">
  <button class="ecn-brush-btn active" id="ecn_remove">Remove</button>
  <button class="ecn-brush-btn" id="ecn_replace">Replace</button>
  <button class="ecn-brush-btn" id="ecn_add">Add</button>
  <button class="ecn-brush-btn" id="ecn_modify">Modify</button>
  <button class="ecn-brush-btn" id="ecnClear">Clear All</button>
</div>

<!-- â•â•â• TREE â•â•â• -->
<div class="tree-container" id="treeContainer">
  <svg id="treeSvg">
    <g class="zoom-group"></g>
  </svg>

  <!-- Zoom controls -->
  <div class="zoom-controls">
    <button class="zoom-btn" id="zoomInBtn">+</button>
    <button class="zoom-btn" id="zoomOutBtn">âˆ’</button>
    <button class="zoom-btn" id="fitBtn2" style="font-size:12px;">âŠ¡</button>
  </div>

  <!-- Legend (populated by JS) -->
  <div class="graph-legend" id="legend"></div>
</div>

<!-- â•â•â• SIDE PANEL â•â•â• -->
<div class="side-panel" id="sidePanel">
  <div id="sidePanelContent"></div>
</div>

<!-- â•â•â• MAIN JS MODULE â•â•â• -->
<script type="module" src="js/app.js"></script>

<!-- Extra: wire up zoom button duplicates -->
<script type="module">
  import { zoomIn, zoomOut, fitToScreen } from './js/graph.js';
  document.getElementById('fitBtn2')?.addEventListener('click', () => fitToScreen(false));
</script>

</body>
</html>
